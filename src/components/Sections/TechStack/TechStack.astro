---
import { getCollection } from "astro:content";
import { TechStackClient } from "./TechStackClient";
import type { Locale } from "@i18n/ui";

interface Props {
  lang: Locale;
}

const { lang } = Astro.props;

const techStack = await getCollection("tech-stack");

const stackCategories = techStack
  .sort((a, b) => a.data.order - b.data.order)
  .map((entry) => ({
    id: entry.data.id,
    category: entry.data.category[lang],
    items: entry.data.items.map((item) => item.name),
  }));
---

<TechStackClient client:load lang={lang} stackCategories={stackCategories} />
